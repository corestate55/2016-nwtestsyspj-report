%% -*- coding: utf-8-unix -*-

\chapter{PoC}
\label{chap:poc}

\section{概要・ねらい}

なんのために、どういったテストをおこなうのか。そもそものPoCの考え方のまとめ・整理

\begin{itemize}
 \item 障害報告ストーリー – NetTester \url{https://3.basecamp.com/3088280/buckets/867009/documents/151143879}
       どういったサービス上のトラブルを検出したいとおもったのか? (ユースケース例)
 \item 技術的にやりたいこと:  静的なテスト/動的なテスト
\end{itemize}

\section{PoCターゲット設定}

 \begin{itemize}
  \item ヨーヨーダイン社/タジマックス通信工業社の設定
        \begin{itemize}
         \item 図
         \item サービスと通信要件(表)
        \end{itemize}
 \end{itemize}

\section{環境構成(Target Network)}

\begin{itemize}
 \item L2/L3, Management network (VR/VRFとout-of-band設定)
 \item FWの冗長化設定:
       \begin{itemize}
        \item active/passive, passiveはパケット転送しない
        \item tcp session state を同期する
        \item 状態監視するインタフェースの設定、自動復旧設定とする
       \end{itemize}
 \item FWのフィルタ設定:
       \begin{itemize}
        \item 原則L3/L4でのフィルタ
        \item tcp state をみる
        \item DNSについてはL7(DPI)でフィルタする
       \end{itemize}
\end{itemize}

\section{環境構成(NetTester)}

\begin{itemize}
 \item Tester Set について
 \item 構成図 \url{https://drive.google.com/open?id=0B2eRR_JxYJA5Nm1VbzBnR1FQMUk}
 \item IPアドレス表 \url{https://drive.google.com/open?id=1v0ecUjUql3cxVMP8gvLyq4T9PEIeUeyMT_-9YrR4l0A}
 \item Syslogについて
\end{itemize}

\section{静的なテスト}


\begin{itemize}
 \item 実装
       \begin{itemize}
        \item Step2テスト業務で気づいたことをまとめる – NetTester \url{https://3.basecamp.com/3088280/buckets/867009/todos/260220903}
       \end{itemize}
 \item 結果: 実際に発見できたトラブルや設定ミスなどをあげる。

       \begin{itemize}
        \item Teardown関連
              \begin{itemize}
               \item 原因切り分けメモ (muraki) – NetTester \url{https://3.basecamp.com/3088280/buckets/867009/documents/217782147}
               \item 調査: テスト環境でシナリオ実行すると2回目以降でコケる – NetTester \url{https://3.basecamp.com/3088280/buckets/867009/todos/218486066}
              \end{itemize}
        \item Target Network の設定不備の発見
              \begin{itemize}
               \item DNSのテスト作る – NetTester \url{https://3.basecamp.com/3088280/buckets/867009/todos/301325453}
               \item 通信要件\#10 A社内PC→インターネットの疎通確認(ICMP) – NetTester \url{https://3.basecamp.com/3088280/buckets/867009/todos/233175867}
               \item 通信要件\#29 B社PC→DMZ内のVPNサーバの疎通確認(SSLVPN) – NetTester \url{https://3.basecamp.com/3088280/buckets/867009/todos/233178490}
              \end{itemize}
       \end{itemize}
\end{itemize}

\section{動的なテスト}

障害試験シナリオを書く – NetTester \url{https://3.basecamp.com/3088280/buckets/867009/todos/238169066}

\begin{itemize}
 \item 実装
 \item 結果
\end{itemize}

\section{シナリオテスト実装における検討ポイント}

\subsection{Teardown処理}

\begin{itemize}
 \item Target network の状態
       \begin{itemize}
        \item ARP Table のクリア
        \item NAT Table のクリア
        \item Firewall の active/standby (自動復旧にしているのでとくにいれていない)
       \end{itemize}
 \item Netns の /etc 配下のクリア
       \begin{itemize}
        \item 自作echoサーバーで通信開始時に10秒のラグが起きる問題 – NetTester \url{https://3.basecamp.com/3088280/buckets/867009/todos/274457003}
       \end{itemize}
 \item 物理OFSのflow tableのクリア (まだやれてない)
\end{itemize}

\section{PoC結果}

結果まとめ

%%% Local Variables:
%%% mode: yatex
%%% TeX-master: main.tex
%%% End:
